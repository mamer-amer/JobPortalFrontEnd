<app-navbar></app-navbar>

<br>
<br>




<div class="container">
  <div class="row">
    <!-- <div class="col-lg-1">

    </div> -->
    <div class="col-lg-12">
      <mat-card style="border-radius:0px;padding:20px">

        <nz-avatar [class.mat-elevation-z2]="true"
          style="margin:20px 20px 0px 20px"
          nzIcon="user"
          [nzShape]="'square'"
          [nzSize]="100"
          [nzSrc]="companyProfile.logo!=null?'data:image/jpeg;base64,'+companyProfile.logo:'../../assets/user.png'">
        </nz-avatar>


        <hr />
        <div class="row" style="width:100%">
          <div class="col-lg-8">
            
            <h3 style="display: inline;">{{companyProfile.name | uppercase }} </h3>
          </div>

          <div class="col-lg-4">
            <span style="display:inline">
              <nz-rate 
                [disabled]="true"
                [ngModel]="avgRating"
                [nzTooltips]="tooltips"></nz-rate>
              <small style="color:lightgray"> Rating ({{avgRating | number:'1.0-1'}}/5)</small>
            </span>
          </div>

        </div>


        <div class="container"
          style="border:1px solid rgb(218, 218, 218);padding:0px;text-align: center;">
          <div style="display: flex;justify-content: center;align-items: center;margin-top:10px;">

            <h4 style="flex: 1;color: rgb(0, 0, 0);">Contact Name: <span style="color: gray;font-weight: normal;">
                {{companyProfile.contactName}}</span></h4>

            <h4 style="flex: 1;color: black">Contact Title: <span style="color: gray;font-weight: normal;">
                {{companyProfile.contactTitle}} </span></h4>



          </div>
          <div style="display: flex;justify-content: center;align-items: center;">
            <h4 style="flex: 1;color: black;">Corporate Address: <span style="color: gray;font-weight: normal;">
                {{companyProfile.corporateAddress}} </span></h4>

            <h4 style="flex: 1;color: black;">Billing Address: <span style="color: gray;font-weight: normal;">
                {{companyProfile.billingAddress}} </span></h4>
          </div>
        </div>
      </mat-card>
    </div>
  </div>

</div>
<div class="container">
  <div class="row">
    <!-- <div class="col-lg-1">
    </div> -->
    <div class="col-lg-12">
      <mat-card style="border-radius:0px;padding:20px;margin:20px 0px 20px 0px;">

        <h3 class="text-center font-weight-bold">Reviews <span class="badge pink">{{comments}}</span></h3>

        <div *ngFor="let candidate of companyReviewRating">

          <div *ngIf="userType!='candidate'" class="card-header border-0 font-weight-bold d-flex justify-content-between">

            <ul style="margin-left: auto"
              class="list-unstyled list-inline mb-0">

              <li class="list-inline-item"><a href=""
                  style="color:#1890ff !important"
                  [routerLink]="['/viewprofile']"
                  [queryParams]="{'candId':candidate.candidateId,'userId':candidate.userId}"
                  class="text-default mr-3"><i class="fa fa-user mr-1"></i>See
                  profile</a></li>

            </ul>
          </div>


          <div class="row"
            style="margin-top:6px !important">
            <div class="col-lg-12">
              <nz-avatar style="float: left"
                nzIcon="user"
                [nzSize]="64"
                [nzSrc]="candidate.dp!=null?'data:image/jpeg;base64,'+candidate.dp:'../../assets/user.png'"></nz-avatar>
              <p style="vertical-align:bottom;font-weight: 600;margin-top: 10px;">
                {{candidate.name}}
                <br>
                <nz-rate style="vertical-align: bottom"
                  [disabled]="true"
                  [ngModel]="candidate.rating"
                  [nzTooltips]="tooltips"></nz-rate>
              </p>
              <p style="margin-left: 60px;color: rgb(153, 152, 152);overflow-wrap: break-word;">
                {{candidate.review}}
              </p>
              <p style="margin-left: 9%;opacity:0.7;font-size: 12px !important;">
                {{candidate.date | myPipe}}</p>
              <hr />
            </div>
          </div>
        </div>



      </mat-card>
    </div>
  </div>

 <!-- write your review here as an employee or recuiter -->
 <div class="row" *ngIf="userType=='candidate'">
   <div class="col-lg-12"
     *ngIf="!reviewBtn">
     <div id="review"
       class="card-header border-0 font-weight-bold reviewHeader">Leave a review
       <span style="float:right;text-align: center"
         class="ratingSectionSpan">

         <p style="display: inline-block">Rate {{companyProfile?companyProfile.name:''}}</p>
         &nbsp;
         <nz-rate [(ngModel)]="rating"
           [nzTooltips]="tooltips"></nz-rate>


       </span>
     </div>


     <div class="d-md-flex flex-md-fill px-1"
       style="width: 100%">
       <div class="md-form w-100">
         <textarea class="form-control md-textarea pt-0"
           id="exampleFormControlTextarea1"
           rows="3"
           #review
           placeholder="Write something here..."></textarea>
       </div>
     </div>
     <div class="text-center">
       <button (click)="postReview(review.value)"
         class="btn btn-default btn-rounded btn-md"
         style="background-color: black !important">Submit</button>
     </div>
   </div>
 </div>


</div>
<br>
<ngx-spinner bdOpacity=1
  bdColor="rgba(200, 216, 215, 0.25)"
  size="medium"
  color="rgba(12,11,11,0.85)"
  type="ball-clip-rotate-pulse"
  [fullScreen]="true">
  <p style="color: white">Loading..</p>
</ngx-spinner>
<app-footer></app-footer>
